/* MapToolsMenu.css */

/* wrapper ของปุ่ม build (อยู่ใน MapControls) */
.tools-pop-wrap{
  position: relative;
}

/* popover: ค่าเริ่มต้นกางไปทางซ้ายของปุ่ม build */
.tools-pop-wrap .mtm-pop{
  position: absolute;
  right: calc(100% - 128px);
  top: 50%;
  transform: translateY(-50%);
  z-index: 9999;
  background: transparent;
  width: 340px; /* เผื่อมี list ใต้การ์ด */
}

/* กล่องวาดพื้นที่ (fix size) */
.mtm-drawCard{
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  padding: 10px;
  border-radius: 14px;

  background: rgba(255,255,255,0.95);
  border: 2px solid rgba(22,163,74,0.55);
  box-shadow: 0 10px 22px rgba(2, 6, 23, 0.12);

  display: flex;
  flex-direction: column;
}

.mtm-drawHeader{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 2px 2px 8px;
}

.mtm-title{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
  color: #0f172a;
  font-size: 14px;
}

.mtm-titleText{
  font-weight: 900;
  color: #16a34a;
  font-size: 15px;
  letter-spacing: 0.2px;
}

.mtm-x{
  border: 0;
  background: transparent;
  cursor: pointer;
  font-weight: 900;
  color: #166534;
  width: 22px;
  height: 22px;
  font-size: 12px;
  border-radius: 8px;
}
.mtm-x:hover{ background: rgba(22,163,74,0.10); }

/* ชิปสลับโหมด (optional) */
.mtm-chip{
  height: 28px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid rgba(22,163,74,0.35);
  background: rgba(22,163,74,0.10);
  color: #166534;
  font-weight: 800;
  font-size: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.mtm-chip .material-icon{ font-size: 16px; }

.mtm-chip.is-eia{
  border-color: rgba(59,130,246,0.35);
  background: rgba(59,130,246,0.10);
  color: #1d4ed8;
}

/* ปุ่มเรียงลง */
.mtm-actionsCol{
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
}

.mtm-btn{
  width: 100%;
  min-height: 28px;

  border-radius: 10px;
  border: 0;
  cursor: pointer;
  padding: 6px 10px;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  font-weight: 900;
  font-size: 12px;
  color: #fff;

  transition: transform 120ms ease, filter 120ms ease, opacity 120ms ease;
}
.mtm-btn--green{ background: #16a34a; }
.mtm-btn--red{ background: #ef4444; }
.mtm-btn--soft{ background: #86efac; color: #065f46; }
.mtm-btn:hover{ transform: translateY(-1px); filter: brightness(0.96); }
.mtm-btn:active{ transform: translateY(0px); }
.mtm-btn:disabled{
  opacity: 0.45;
  cursor: not-allowed;
  transform: none;
  filter: none;
}

/* รายการอื่นๆ ใต้กล่อง (Tools / Role) */
.mtm-list{
  margin-top: 8px;
  width: 200px; /* ให้เท่าการ์ด */
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(15,23,42,0.12);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 10px 22px rgba(2, 6, 23, 0.12);
}

.mtm-item{
  width: 100%;
  background: transparent;
  border: 0;
  padding: 10px 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  color: #0f172a;
}
.mtm-item:hover{ background: rgba(22,163,74,0.08); }

.mtm-item .material-icon{ font-size: 18px; }
.mtm-itemText{ flex: 1; font-size: 14px; }

.mtm-badge{
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(22,163,74,0.12);
  border: 1px solid rgba(22,163,74,0.25);
  color: #166534;
  font-weight: 800;
}

/* ==================================================
   RESPONSIVE: ย่ออัตโนมัติ + กันชนขอบจอ
   ================================================== */

/* Tablet: ย่อขนาดการ์ด */
@media (max-width: 1024px){
  .mtm-drawCard{ width: 170px; height: 170px; padding: 8px; }
  .mtm-list{ width: 170px; }

  .mtm-titleText{ font-size: 14px; }
  .mtm-actionsCol{ gap: 5px; }

  .mtm-btn{ min-height: 26px; font-size: 11px; padding: 5px 8px; }
}

/* Mobile: ย่อ + “ย้าย popover ไปด้านล่าง” เพื่อไม่ชนขอบซ้าย */
@media (max-width: 640px){
  .mtm-drawCard{ width: 140px; height: 140px; padding: 6px; border-radius: 12px; }
  .mtm-list{ width: 140px; }

  .mtm-titleText{ font-size: 13px; }
  .mtm-actionsCol{ gap: 4px; }

  .mtm-btn{ min-height: 24px; font-size: 10px; padding: 4px 6px; border-radius: 8px; }
  .mtm-x{ width: 20px; height: 20px; font-size: 11px; }

  /* สำคัญ: ย้ายตำแหน่ง popover จากซ้าย -> ลงล่าง */
  .tools-pop-wrap .mtm-pop{
    right: 0;
    top: calc(100% + 10px);
    transform: none;
  }
}

/* =========================================
   Production mobile safe positioning
========================================= */

/* small phones */
@media (max-width: 420px){

  /* ให้ popover กว้างเต็ม usable width */
  .tools-pop-wrap .mtm-pop{
    right: 0;
    left: auto;
    width: min(200px, calc(100vw - 24px));
  }

  .mtm-drawCard,
  .mtm-list{
    width: 100%;
  }
}

/* very small height screens (landscape phones) */
@media (max-height: 520px){

  /* ถ้าหน้าจอเตี้ย ให้เปิดด้านข้างแทนด้านล่าง */
  .tools-pop-wrap .mtm-pop{
    right: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%);
  }
}
